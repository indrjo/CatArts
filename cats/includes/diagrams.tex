% |TEX program = lualatex
% !TEX spellcheck = en_GB
% !TEX root = ../cats.tex

\section{The language of diagrams}

A {\em diagram} is a drawing made of \q{nodes}, that is empty slots, and \q{arrows}, that part from some nodes and head to other ones. Here is an example:
\begin{equation}\begin{tikzcd}[row sep=tiny]
  & \phantom\square \ar[dr, bend left=10] \\
\phantom\square \ar[ur, bend left=20] \ar[ur, bend right=20, swap] & & \phantom\square  \\
  & \phantom\square \ar[uu, bend right=10, swap] 
\end{tikzcd}\label{diagram:MuteDiag}\end{equation}

Nodes are the places where to put objects' names and arrows are to be labelled with morphisms' names. The next step is putting labels indeed, something like this:
\begin{equation}\begin{tikzcd}[row sep=tiny]
  & b \ar["q", dr, bend left=10] \\
a \arrow["f", ur, bend left=20] \arrow["g", ur, bend right=20, swap] & & d  \\
  & c \arrow["h", uu, bend right=10, swap] 
\end{tikzcd}\label{diagram:LabelDiag}\end{equation}

The idea we want to capture is: having a scheme of nodes and arrows, as in~\eqref{diagram:MuteDiag}, and then assigning labels, as in~\eqref{diagram:LabelDiag}. Since diagrams serve to graphically show some categorial structure, there should exist the possibility to \q{compose} arrows: two consecutive arrows
\begin{equation}\begin{tikzcd}
\phantom\square \ar[r, bend left=20] & \phantom\square \ar[r, swap, bend right=20] & \phantom\square
\end{tikzcd}\label{diagram:ConseqArrs}\end{equation}
naturally yields that one that goes from the first node and heads to the last one; if in~\eqref{diagram:ConseqArrs} we label the arrows with \(f\) and \(g\), respectively, then the composite arrow is to be labelled with the composite morphism \(gf\). That operation shall be associative and there should exist identity arrows too, that is arrows that represent and behave exactly as identity morphisms. In other words, our drawings shall care of the categorial structure.

Yes, there is a formal definition of diagram, but we'd better defer this sophistication a bit later.

Consecutive arrows form a \q{path} (of arrows). In that case, we refer to the domain of its first arrow as the domain of the path and to the codomain of the last one as the codomain of the path. Two paths are said \q{parallel} when they share both domain and codomain. A diagram is said to be {\em commutative}, whenever any pair of parallel paths in it yields the same composite morphism.

\begin{example}[Identities via commutative diagrams]
Let \(\cat C\) be a category and \(x \in \obj{\cat C}\). The fact that \(\id_x\) the identity of \(x\) can be translated as follows:
\begin{equation}\begin{tikzcd}[row sep=small]
 & x \ar["{\id_x}" description, dd] \ar["g", dr] & \\
a \ar["f", ur] \ar["f", dr, swap] & &  b \\
  & x \ar["g", ur, swap] &
\end{tikzcd}\label{diag:IdPropDiag}\end{equation}
commutes for every \(a\), \(b\), \(f\) and \(g\) in \(\cat C\). Here, the diagram~\eqref{diag:IdPropDiag} commutes means that either of its triangles commute.
\end{example}

\begin{example}[Associativity via commutative diagrams]
[\dots{}]
\end{example}

Cause diagrams are supposed to be drawn, we shall assume some conventions. The spatial placement of nodes and the shape of arrows is a matter of aesthetic: just pursue clarity. Do not burden your diagrams: though arrows can be composed, we usually do not draw them; similarly, neither identities should be drawn.

\NotaInterna{Defer this moment?}

\begin{definition}[Diagrams]
A {\em diagram} in a category \(\cat C\) amounts of
\begin{itemize}
\item a category \q{of nodes and arrows} (or \q{index category}) \(\cat I\)
\item a function
\[x : \obj{\cat I} \to \obj{\cat C}\]
that serves the task of labelling the nodes of \(\cat I\)
\item for every \(i, j \in \obj{\cat I}\), a function
\[f_{i, j} : \cat I (i, j) \to \cat C(x_i, x_j)\]
that assigns labels to the arrows of \(\cat I\)
\end{itemize}
such that
\begin{enumerate}
\item \(f_{i, i}(\id_i) = \id_{x_i}\) for every \(i \in \obj{\cat I}\)
\item for every \(i, j, k \in \obj{\cat I}\), \(\alpha \in \cat I(i, j)\) and \(\beta \in \cat I(j, k)\), then
\[f_{j, k}(\beta) f_{i, j}(\alpha) = f_{i, k}(\beta\alpha) .\]
\end{enumerate}
\end{definition}

\NotaInterna{The work is not over yet: a finer formalisation of commutativity?}
